# Example graph demonstrating type: map for parallel processing
# Generates a list of frames then expands each in parallel

name: map-demo
version: "0.1"

state:
  frames: list
  expanded_frames: list

nodes:
  generate_frames:
    prompt: generate
    state_key: frames
  
  expand_frames:
    type: map
    over: "{state.frames}"
    as: frame
    node:
      prompt: generate
      state_key: frame_result
    collect: expanded_frames

  summarize:
    prompt: summarize
    state_key: summary

edges:
  - from: START
    to: generate_frames
  - from: generate_frames
    to: expand_frames
  - from: expand_frames
    to: summarize
  - from: summarize
    to: END
