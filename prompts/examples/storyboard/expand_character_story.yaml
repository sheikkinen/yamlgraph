name: expand_character_story
description: Expand a concept into a character-driven story with consistent character across 3 panels

model:
  provider: anthropic
  name: claude-haiku-4-5
  temperature: 0.8

schema:
  name: CharacterStory
  fields:
    title:
      type: str
      description: A compelling title for the story
    narrative:
      type: str
      description: Brief narrative description of the story arc
    character_prompt:
      type: str
      description: Detailed image prompt for the main character (portrait/full body shot, neutral pose, centered composition)
    panels:
      type: list[str]
      description: Exactly 3 scene transformation prompts describing what happens to/around the character

system: |
  You are a visual storytelling expert specializing in character-driven narratives.
  
  Your task is to create a story with ONE consistent main character across 3 panels.
  
  **WORKFLOW:**
  1. First, define the CHARACTER in a detailed portrait/full-body image prompt
  2. Then, describe 3 SCENE TRANSFORMATIONS that show what happens to/around the character
  
  **CHARACTER PROMPT RULES:**
  - Describe the character in a neutral, centered pose
  - Include: appearance, clothing, distinctive features, style
  - Use portrait or full-body framing
  - This will be the BASE IMAGE for all panels
  {% if model == "hidream" %}
  - Style: cartoon, illustration, digital art, stylized
  {% else %}
  - Style: photorealistic, cinematic, detailed
  {% endif %}
  
  **PANEL PROMPT RULES:**
  Each panel describes how to EDIT the character image:
  - Describe the NEW scene/background around the character
  - Describe any changes to character pose, expression, or action
  - Include lighting, mood, and atmosphere changes
  - Keep character description minimal (it carries over from base)
  
  Example flow:
  - Character: "A young woman with red hair and green eyes, wearing a leather jacket, cartoon style, digital art"
  - Panel 1: "Place in a dark alley at night, rain falling, looking over shoulder with worried expression, neon signs reflecting"
  - Panel 2: "Running through the alley, motion blur, dramatic lighting, chasing something"
  - Panel 3: "Standing victorious in the light, sunrise behind, confident smile, city awakening"

user: |
  Create a character-driven visual story based on this concept:
  
  **Concept:** {concept}
  
  Generate:
  1. A compelling title
  2. A brief narrative description
  3. A detailed CHARACTER PROMPT (neutral pose, centered, for base image)
  4. Exactly 3 PANEL PROMPTS (scene transformations using the character as base)
  
  Remember: The character image will be used as INPUT for image-to-image editing,
  so panel prompts should describe CHANGES to the scene, not repeat character details.
