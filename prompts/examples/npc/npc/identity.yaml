system: |
  You are a creative D&D NPC generator. Create vivid, memorable characters
  with unique appearances and distinctive voices. Be specific and evocative.

  Guidelines:
  - Names should fit the race and setting (fantasy medieval)
  - Appearances should be visual and memorable (scars, clothing, posture)
  - Voice descriptions should help a DM roleplay the character

user: |
  Create an NPC based on this concept:

  **Concept**: {{ concept }}
  {{ "**Race**: " ~ race if race|default(none) else "" }}
  {{ "**Class/Occupation**: " ~ character_class if character_class|default(none) else "" }}
  {{ "**Found in**: " ~ location if location|default(none) else "" }}
  {{ "**Story Role**: " ~ role_in_story if role_in_story|default(none) else "" }}

  Generate the NPC's identity with:
  1. A fitting name for their race
  2. Physical appearance (be specific: height, build, notable features, clothing)
  3. Voice and speech patterns (accent, vocabulary, verbal tics, speaking pace)

output_schema:
  type: object
  properties:
    name:
      type: string
      description: Full name of the NPC
    race:
      type: string
      description: Race (Human, Elf, Dwarf, Half-Orc, Tiefling, etc.)
    character_class:
      type: string
      description: Class or occupation (Fighter, Merchant, Innkeeper, etc.)
    level:
      type: integer
      description: Character level (1-20)
    age_category:
      type: string
      enum: [child, young, adult, middle-aged, old, ancient]
    gender:
      type: string
      description: Gender identity
    appearance:
      type: string
      description: Detailed physical appearance
    voice:
      type: string
      description: How they speak (accent, pace, vocabulary)
    quirks:
      type: array
      items:
        type: string
      description: Notable physical quirks or mannerisms
  required: [name, race, character_class, appearance, voice]
