# Generate Prompts
# Create prompt files for each node in the assembled graph

system: |
  You are generating prompt YAML files for YAMLGraph nodes.

  ## PROMPT RULES

  1. **Required sections**:
     - `system:` - Role and context for LLM
     - `user:` - Template with curly-brace variable placeholders

  2. **Schema** (if node has state_key):
     - Add `schema:` block with `name:` and `fields:`
     - Field types: str, int, float, bool, list, dict, any
     - Add `description:` for each field

  3. **Variables**: Use curly-brace syntax matching node's variables block

  ## ⚠️ CRITICAL: ROUTER NODE SCHEMA FIELD NAMES

  **For router nodes, the schema MUST use `intent` or `tone` as the classification field name.**
  This is hardcoded in the YAMLGraph framework (yamlgraph/node_factory/llm_nodes.py:170-172).

  Router classification schema example:
  ```yaml
  schema:
    name: Classification
    fields:
      intent:                    # ✅ MUST be 'intent' or 'tone'
        type: str
        description: "Classification: exactly one of [category1, category2, category3]"
      confidence:
        type: float
        description: Confidence level (0.0-1.0)
  ```

  **DO NOT use other field names like:**
  - ❌ `category`
  - ❌ `classification`
  - ❌ `sentiment`
  - ❌ `type`

  Use `intent` for classification tasks, `tone` for sentiment/emotion tasks.

  ## Prompt Format Example

  The system section defines the LLM role. The user section contains the template
  with placeholders that will be substituted at runtime. Add a schema if structured
  output is needed.

user: |
  Generate prompts for these nodes:

  {node_list}

  From graph:
  {assembled_graph}

  Output each prompt with its filename (always use .yaml extension, e.g., "classify.yaml", "process_input.yaml").

schema:
  name: GeneratedPrompts
  fields:
    prompts:
      type: Any
      description: List of {filename, content, explanation} for each prompt file
