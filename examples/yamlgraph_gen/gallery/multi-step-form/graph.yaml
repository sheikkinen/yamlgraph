version: "1.0"
name: multi-step-form
description: Multi-step form with human review

defaults:
  provider: anthropic
  model: claude-sonnet-4-20250514
  prompts_dir: prompts
  prompts_relative: true

checkpointer:
  type: memory

state:
  topic: str
  draft_questions: list
  human_feedback: str
  final_form: str

nodes:
  generate_questions:
    type: llm
    prompt: generate_questions
    state_key: draft_questions
    variables:
      topic: "{state.topic}"

  review_questions:
    type: interrupt
    prompt: review_questions
    resume_key: human_feedback

  finalize_form:
    type: llm
    prompt: finalize_form
    state_key: final_form
    variables:
      topic: "{state.topic}"
      draft_questions: "{state.draft_questions}"
      human_feedback: "{state.human_feedback}"

edges:
  - from: START
    to: generate_questions

  - from: generate_questions
    to: review_questions

  - from: review_questions
    to: finalize_form

  - from: finalize_form
    to: END
