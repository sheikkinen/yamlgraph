version: "1.0"
name: content-pipeline
description: Generate and format content through a linear pipeline

defaults:
  provider: anthropic
  model: claude-sonnet-4-20250514
  prompts_dir: prompts
  prompts_relative: true

state:
  topic: str
  research: str
  draft: str
  edited: str
  final: str

nodes:
  research:
    type: llm
    prompt: research
    state_key: research
    variables:
      topic: "{state.topic}"

  draft:
    type: llm
    prompt: draft
    state_key: draft
    variables:
      topic: "{state.topic}"
      research: "{state.research}"

  edit:
    type: llm
    prompt: edit
    state_key: edited
    variables:
      draft: "{state.draft}"

  format:
    type: llm
    prompt: format
    state_key: final
    variables:
      topic: "{state.topic}"
      edited: "{state.edited}"

edges:
  - from: START
    to: research

  - from: research
    to: draft

  - from: draft
    to: edit

  - from: edit
    to: format

  - from: format
    to: END
